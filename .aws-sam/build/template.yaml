AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: LinkedIn Post Generator API
Globals:
  Function:
    Timeout: 30
    Runtime: python3.10
Resources:
  LinkedinStackFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: LinkedinStackFunction
      Handler: app.main.lambda_handler
      Runtime: python3.10
      PackageType: Zip
      Environment:
        Variables:
          SUPABASE_URL: https://yjnltbrknjjiptppegqp.supabase.co
          SUPABASE_KEY: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlqbmx0YnJrbmpqaXB0cHBlZ3FwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5OTg4OTksImV4cCI6MjA2NTU3NDg5OX0.porgzfxK5pPyKvWa7Pf9YO6KV4Sno3BYEf2j4jlrFqc
          SUPABASE_JWT_SECRET: Ere3ndD+a1s1oSdeyY56siIvXTo9TOKR7AlaG7ntysW79pLNgzw0nciXQlugboxFHEPb2x6Vcmv6vm36XErGCQ==
          PINECONE_API_KEY: pcsk_6qhzJp_HfwqqjVrw7yPSW4Y3SNkBfAdEUYutXznSdVHSAxP8tiz4yJNuwKfsg1P7e9N2Co
          PINECONE_ENVIRONMENT: us-east-1
          PINECONE_INDEX_NAME: socialauto
          GOOGLE_API_KEY: AIzaSyCIOWkyVtdaFaTczff6FKojMoi4veZxsXI
      Events:
        LinkedinApi:
          Type: HttpApi
          Properties:
            Path: /{proxy+}
            Method: ANY
    Metadata:
      SamResourceId: LinkedinStackFunction
Outputs:
  LinkedinStackApi:
    Description: API endpoint URL for LinkedinStackFunction
    Value:
      Fn::Sub: https://${ServerlessHttpApi}.execute-api.${AWS::Region}.amazonaws.com/
